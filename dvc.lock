schema: '2.0'
stages:
  download_DevGPT:
    cmd:
    - dvc get-url --force https://zenodo.org/records/10086809/files/DevGPT.zip?download=1
    - mkdir -p data/external
    - unzip DevGPT.zip -d data/external/DevGPT
    - rm DevGPT.zip
    outs:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
  clone_repos:
    cmd: python scripts/data/download_repositories.py data/external/DevGPT/ /mnt/data/MSR_Challenge_2024/repositories/
      data/repositories_download_status.json
    deps:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
    - path: scripts/data/download_repositories.py
      hash: md5
      md5: ecf6bc29c934494835f8117b203198c2
      size: 7849
    outs:
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
  commit_agg:
    cmd: python scripts/data/commit_sharings_to_agg.py data/external/DevGPT/ data/repositories_download_status.json
      data/interim/
    deps:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/commit_sharings_to_agg.py
      hash: md5
      md5: 8528815d3f6dea73c0250f9109522b82
      size: 5624
    outs:
    - path: data/interim/commit_sharings_df.csv
      hash: md5
      md5: d6095d145d527872f2f3a4cb48102014
      size: 483444
    - path: data/interim/commit_sharings_groupby_repo_df.csv
      hash: md5
      md5: fb48677300a61d2877503ec897f0c4e5
      size: 4994
  commit_survival:
    cmd: python scripts/data/compute_changes_survival.py data/interim/commit_sharings_df.csv
      data/repositories_download_status.json data/interim/commit_sharings_changes_survival_df.csv
      data/interim/commit_sharings_lines_survival_df.csv
    deps:
    - path: data/interim/commit_sharings_df.csv
      hash: md5
      md5: d6095d145d527872f2f3a4cb48102014
      size: 483444
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/compute_changes_survival.py
      hash: md5
      md5: 874784aa8866c4f9a5d71f4796f53ade
      size: 23482
    outs:
    - path: data/interim/commit_sharings_changes_survival_df.csv
      hash: md5
      md5: 4113b0f45a600a2da47f2b35bb06aea3
      size: 530736
    - path: data/interim/commit_sharings_lines_survival_df.csv
      hash: md5
      md5: 30d2290776f2e4ef08a43704b8ed8b30
      size: 48269210
  repo_stats_git:
    cmd: python scripts/data/compute_repository_statistics_git.py data/external/DevGPT/
      data/repositories_download_status.json data/interim/repository_statistics_git.json
    deps:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/compute_repository_statistics_git.py
      hash: md5
      md5: 3a1ab9002d42ab9f1809764e8c4c1be1
      size: 6566
    outs:
    - path: data/interim/repository_statistics_git.json
      hash: md5
      md5: 6bc428239623d6e9573558ef604c8540
      size: 303476
  repo_stats_github:
    cmd: python scripts/data/compute_repository_statistics_github.py data/external/DevGPT/
      data/repositories_download_status.json data/interim/repository_statistics_github.json
    deps:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/compute_repository_statistics_github.py
      hash: md5
      md5: a68674ba5fa9a454f2d14c048f11bb49
      size: 5164
    outs:
    - path: data/interim/repository_statistics_github.json
      hash: md5
      md5: c45c63b7babd2d193dee62d02cbaa98a
      size: 615306
  pr_agg:
    cmd: python scripts/data/pr_sharings_to_agg.py data/external/DevGPT/ data/repositories_download_status.json
      data/interim/
    deps:
    - path: data/external/DevGPT/
      hash: md5
      md5: 223e6501a84a339b341bfb843595d1b2.dir
      size: 4182300528
      nfiles: 65
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/pr_sharings_to_agg.py
      hash: md5
      md5: b01727f7136eed93a91157716a9b2eee
      size: 11539
    outs:
    - path: data/interim/pr_sharings_df.csv
      hash: md5
      md5: 975e65868265611c525ac2bdf2bdabab
      size: 768395
    - path: data/interim/pr_sharings_groupby_repo_df.csv
      hash: md5
      md5: 5a9a8199defd70f663a4f534dfdfcc79
      size: 16720
    - path: data/interim/pr_sharings_split_commit_df.csv
      hash: md5
      md5: 6e514d9c1ad1bf3877f2c4e2ba14e8f3
      size: 1176177
  pr_survival:
    cmd: python scripts/data/compute_changes_survival.py data/interim/pr_sharings_df.csv
      data/repositories_download_status.json data/interim/pr_sharings_changes_survival_df.csv
      data/interim/pr_sharings_lines_survival_df.csv
    deps:
    - path: data/interim/pr_sharings_df.csv
      hash: md5
      md5: 975e65868265611c525ac2bdf2bdabab
      size: 768395
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/compute_changes_survival.py
      hash: md5
      md5: 874784aa8866c4f9a5d71f4796f53ade
      size: 23482
    outs:
    - path: data/interim/pr_sharings_changes_survival_df.csv
      hash: md5
      md5: eca07be9f726511081a4011322276b43
      size: 593359
    - path: data/interim/pr_sharings_lines_survival_df.csv
      hash: md5
      md5: a272dfeade204bec879618eb71a22b65
      size: 47992080
  pr_split_survival:
    cmd: python scripts/data/compute_changes_survival.py data/interim/pr_sharings_split_commit_df.csv
      data/repositories_download_status.json data/interim/pr_sharings_split_commit_changes_survival_df.csv
      data/interim/pr_sharings_split_commit_lines_survival_df.csv
    deps:
    - path: data/interim/pr_sharings_split_commit_df.csv
      hash: md5
      md5: 6e514d9c1ad1bf3877f2c4e2ba14e8f3
      size: 1176177
    - path: data/repositories_download_status.json
      hash: md5
      md5: 8898a0ba57ae8a4a3874a500896de4de
      size: 233264
    - path: scripts/data/compute_changes_survival.py
      hash: md5
      md5: 874784aa8866c4f9a5d71f4796f53ade
      size: 23482
    outs:
    - path: data/interim/pr_sharings_split_commit_changes_survival_df.csv
      hash: md5
      md5: 936dae4dc315e14aca3bae3f36063169
      size: 1287882
    - path: data/interim/pr_sharings_split_commit_lines_survival_df.csv
      hash: md5
      md5: 8f8932f77c14d26bbf65ad0153df5f1d
      size: 149749534
